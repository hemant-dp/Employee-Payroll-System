# 1. Frontend Image Build
- name: Build Frontend Image
  run: docker build -t hrajpoot121/employee-frontend:latest ./Employee-Payroll-App-Frontend

# 2. Login Step (Ensure this is present before push)
- name: Login to Docker Hub
  uses: docker/login-action@v2
  with:
    username: ${{ secrets.DOCKERHUB_USERNAME }}
    password: ${{ secrets.DOCKERHUB_TOKEN }}

# 3. Push to Registry
- name: Push Frontend to Docker Hub
  run: docker push hrajpoot121/employee-frontend:latest

# 4. Deploy to K8s
- name: Deploy Frontend to Kubernetes
  run: |
    kubectl apply -f k8s/frontend-deployment.yaml
    kubectl apply -f k8s/frontend-service.yaml
    kubectl rollout restart deployment employee-frontend
